#!/usr/bin/env bash

# TODO: the following two paragraphs should be moved to bon

if [[ -z "${NODE_PATH}" ]]; then
  # if the $NODE_PATH is not set (length is zero) - try to guess...
  for path in "/usr/lib/node_modules" "/usr/local/lib/node_modules" "$(dirname $(which npm))/../lib/node_modules"
  do
    if [[ -d "${path}" ]]; then
      NODE_PATH="${path}"
      break
    fi
  done
fi

if [[ -z "${NODE_PATH}" ]]; then
  # still, $NODE_PATH is not set - bad luck
  echo "Please set \$NODE_PATH - where global node_modules are installed."
  exit 1
fi

BON_SCRIPT="bin/datomic-free"

source bon "$@"
